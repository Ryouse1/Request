<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ウェブサイト総合解析ツール</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h1>ウェブサイト総合解析ツール</h1>
<p>解析したい URL を入力してください（http/https 必須）:</p>
<input type="text" id="urlInput" placeholder="https://example.com" size="50">
<button id="analyzeBtn">解析</button>

<div id="output"></div>

<script>
async function analyze() {
    const url = document.getElementById("urlInput").value;
    const output = document.getElementById("output");
    output.textContent = "解析中…";

    if(!url.startsWith("http")) {
        output.textContent = "URLは http:// または https:// で始めてください";
        return;
    }

    try {
        // Node.jsプロキシ経由でCORS回避
        const proxyUrl = `/proxy?url=${encodeURIComponent(url)}`;
        const res = await fetch(proxyUrl);
        const text = await res.text();

        output.textContent = `--- HTML取得結果 ---\n${text.slice(0, 1000)}...\n\n※全体は省略`;
    } catch(e) {
        output.textContent = "取得失敗: " + e;
    }
}

document.getElementById("analyzeBtn").onclick = analyze;
</script>
</body>
</html>
